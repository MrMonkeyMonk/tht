#!/bin/bash

# tv = tsv viewer

# -t returns true if file descriptor (stdout) is a tty,
# which means it is connected to the terminal;
# the opposite is if it is redirected or piped
ni=
if [ ! -t 1 ]; then
    # disable pager and just print table
    ni="--ni"
fi

# only output first x lines
lines="${1:-1000}"

# Rationale for piping to head is a large number of results is not useful to browse manually.
# On top of that, pspg waits until all input is available before displaying in order to calculate
# column widths and totals.

head -n "$lines" | pspg --tsv --csv-header=on --vertical-cursor --freezecols=0 $ni
